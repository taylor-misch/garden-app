{% extends "base.html" %}

{% block title %}Home - Garden Activity Logger{% endblock %}

{% block content %}
<div class="container">
    <div class="hero">
        <h1>ğŸŒ± Welcome to Your Garden Activity Logger</h1>
        {% if current_garden %}
            <div class="current-garden-info">
                <p>Currently viewing: <strong>{{ current_garden.name }}</strong> ({{ current_garden.year }})</p>
                {% if current_garden.location %}
                    <p class="garden-location">ğŸ“ {{ current_garden.location }}</p>
                {% endif %}
                {% if current_garden.description %}
                    <p class="garden-description">{{ current_garden.description }}</p>
                {% endif %}
            </div>
        {% else %}
            <p>Select a garden to get started, or create your first garden!</p>
        {% endif %}
        <p>Track your garden activities throughout the growing season</p>
    </div>

    <div class="features-grid">
        <div class="feature-card">
            <h3>ğŸ¡ Gardens</h3>
            <p>Manage your gardens and create new ones for different seasons</p>
            <a href="/gardens" class="btn btn-primary">Manage Gardens</a>
        </div>

        <div class="feature-card">
            <h3>ğŸŒ¿ Plant Types</h3>
            <p>Manage the types of plants you're growing in your garden</p>
            <a href="/plant-types?garden_id={{ current_garden.id if current_garden }}" class="btn btn-primary">Manage Plant Types</a>
        </div>

        <div class="feature-card">
            <h3>ğŸ¥• Log Harvests</h3>
            <p>Record your daily harvest quantities and track production</p>
            <a href="/harvests?garden_id={{ current_garden.id if current_garden }}" class="btn btn-primary">Log Harvest</a>
        </div>

        <div class="feature-card">
            <h3>ğŸ“Š Harvest Summary</h3>
            <p>View total production for each type of plant</p>
            <a href="/harvest-summary?garden_id={{ current_garden.id if current_garden }}" class="btn btn-primary">View Summary</a>
        </div>

        <div class="feature-card">
            <h3>ğŸ’§ Garden Activities</h3>
            <p>Track watering and fertilizing schedules</p>
            <a href="/activities?garden_id={{ current_garden.id if current_garden }}" class="btn btn-primary">Log Activities</a>
        </div>

        <div class="feature-card">
            <h3>ğŸª´ My Plants</h3>
            <p>Track individual plants and maintain growing journals</p>
            <a href="/plants?garden_id={{ current_garden.id if current_garden }}" class="btn btn-primary">Manage Plants</a>
        </div>
    </div>
</div>

<script>
    // On index page, redirect to preferred garden if no garden_id is present
    document.addEventListener('DOMContentLoaded', function() {
        const urlParams = new URLSearchParams(window.location.search);
        const preferredGardenId = getPreferredGardenId();

        // If no garden_id in URL but we have a preferred garden, redirect to include it
        if (!urlParams.has('garden_id') && preferredGardenId) {
            const newUrl = `/?garden_id=${preferredGardenId}`;
            window.location.href = newUrl;
        }
    });
</script>
{% endblock %}
